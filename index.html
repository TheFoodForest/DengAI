<!DOCTYPE html>
<html lang="en">

<head>
    <title>DengAI</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/highcharts.css">
    
</head>

<body id="myPage" onload="initViz();" data-spy="scroll" data-target=".navbar" data-offset="60">

    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container" id="top-bar">

            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#myPage">
                    DengAI
                </a>
            </div>

            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#myPage">Home</a></li>
                    <li><a href="#about">Project</a></li>
                    <li><a href="#predictions">Predictions</a></li>
                    <li><a href="#conclusion">Conclusion</a></li>
                </ul>
            </div>

        </div>
    </nav>

    <div class="jumbotron text-center">
        <h3 class="jumbo-text">
            <strong>Using Machine Learning to Predict the Spread of Mosquito-Borne Disease in Tropical Cities</strong>
        </h3>
    </div>

    <div id="about" class="container-fluid text-center">

        <div class="row" id="intro">
            <p>This project aims to predict local epidemics of dengue fever using environmental data collected by
                U.S. Federal Government agencies. Using historical data for San Juan, Puerto Rico and Iquitos, Peru,
                predictions were generated with the machine learning tools Google TensorFlow and Facebook Prophet.
                Raw data is available through
                <a href="https://www.drivendata.org/competitions/44/dengai-predicting-disease-spread/">DrivenData</a>.
            </p>
            <br>
        </div>

        <div class="row customDen">

            <div class="col-md-4 disease">
                <h2 style="text-align: center">Mosquito-borne Disease </h2>
                <p>Mosquito-borne disease is a common scourge throughout the world, causing hundreds of million of
                    illnesses
                    and millions of deaths every year. While most prevalent in tropical environments, there are over
                    3,000 species
                    of mosquitoes found across the globe. Mosquito-borne illnesses can be caused by bacteria, viruses,
                    or parasites
                    transmitted to humans when the mosquito bites. Dengue is a viral disease spread by species of female
                    mosquitoes of the Aedes type,
                    principally Aedes aegypti. Other diseases transmitted by mosquitoes include Malaria, West Nile,
                    Zika,
                    Chikungunya,
                    and Yellow Fever. The spread of mosquito-borne disease is related to climate variables such as
                    temperature
                    and precipitation. Although the relationship is complex, climate change may produce changes in
                    mosquito
                    prevalence
                    and disease burden that will have significant public health implications worldwide.
                </p>

            </div>

            <div class="col-md-8 tableau">
                <div id="vizContainer" style="width:100%; height:500px"></div>
            </div>

        </div>

        <br><br>

        <div class="row customDen">


            <div class="col-md-4 disease">
                <h2 style="text-align: center">Dengue Fever</h2>
                <p>Dengue fever is a mosquito-borne viral disease that occurs in tropical and sub-tropical parts of the
                    world.
                    In mild cases, symptoms are similar to the flu: fever, rash, and muscle and joint pain. In severe
                    cases,
                    dengue fever can cause severe bleeding, low blood pressure, and even death.
                    In recent years dengue fever has been spreading. Historically, the disease has been most prevalent
                    in
                    Southeast Asia and the Pacific islands. These days many of the nearly half-billion cases per year
                    are
                    occurring in Latin America. <br><br> This project examined two tropical cities impacted by Dengue:
                    San Juan, Puerto Rico and Iquitos, Peru. Both cities have about 400,000 people. San Juan is a
                    coastal city. Iquitos
                    is an inland city amid the Amazon Rainforest.</p>
            </div>

            <div class="col-md-8 tableau">
                <div id="vizContainer-2" style="width:100%; height:500px;"></div>
            </div>

        </div>

        <br><br>

        <div class="row customDen">

            <div class="col-md-4 disease">
                <h2 style="text-align: center">Machine Learning Approach </h2>
                <p> Our goal was to predict the number of dengue cases each week in each location based on environmental
                    variables describing changes in temperature, precipitation, and vegetation. Predictions were
                    generated based on a dataset with weekly cases from 1991 to 2007 for San Juan and 2001 to 2009 for
                    Iquitos. <br><br>
                    Two prediction models were used. Facebook Prophet forecasts time series data based on an additive
                    model where non-linear trends are fit with yearly, weekly, and daily seasonality, plus holiday
                    effects. TensorFlow is a Deep Learning library developed by Google, we developed a simple Long
                    Short-Term Memory(LSTM) model.

                </p>

            </div>

            <div class="col-md-8  tableau">
                <div id="vizContainer-3" style="width:100%; height:500px"></div>
            </div>

        </div><br>

    </div>

    <div id="predictions" class="container-fluid text-center bg-grey">

        <h2>Predictions for San Juan, Puerto Rico</h2>

        <div class="row">
            <div class="col-md-12" id="sj-prophet">
                <figure class="highcharts-figure">
                    <div id="container_sj"></div>
                    <p class="highcharts-description"></p>
                </figure>
            </div>
        </div>
        <br>
        <div id="sj-discuss" class="row">
            <div class="col-md-12">
                <h2 style="text-align: center">San Juan Results Discussion</h2>
                <p style='padding-right: 3%;padding-left: 3%;'>While we had data from 1991 – 2008 for San Juan, the time period previous to 2000 seemed to have unreliable trends, large outliers, and large fluctuations of the number of infected individuals, so the Facebook Prophet time series model was trained on data from 2000 onward, however the Google TensorFlow LSTM model was not noticeably impacted by these fluctuations and used the complete dataset. The models process the data in completely different manners and that requires preprocessing to be different, this difference is the reason that the Prophet model is able to output predictions for the entire dataset and TensorFlow output only the last year.  To easily visualize how well the model can generalize and predict unknown values, we cut off the last year of the San Juan data set and used that for testing model accuracy.  For San Juan, the Facebook Prophet Model had a training mean absolute error (MAE) of 5.67 cases per week, and a testing MAE of 14.64 cases per week, the TensorFlow model had a testing MAE of 23.31 cases per week.  With true values up to 170 cases in one week for the week of October 1st , 2008, a MAE of about 15 on the testing data isn’t problematic, but still leaves plenty of room for improvement.  A major challenge in this machine learning competition is that the environmental factors do not encompass enough information to capture what could be causing the big spikes in the number of cases (as shown in the above graph in 2005 and 2007).  There were rules limiting our ability to bring in extra data sets for this competition, but some data related to travel, or socioeconomic fluctuations may bring in some more information that allows machine learning models to more effectively capture a relationship that explains the larger Dengue outbreaks.  
                </p>
            </div>
        </div>



        <h2>Predictions for Iquitos, Peru</h2>

        <div class="row">
            <div class="col-md-12" id="iq-prophet">
                <figure class="highcharts-figure">
                    <div id="container_iq"></div>
                    <p class="highcharts-description"></p>
                </figure>
            </div>
        </div>
        <br>
        <div id="iq-discuss" class="row">
            <div class="col-md-12">
                <h2 style="text-align: center">Iquitos Results Discussion</h2>
                <p style='padding-right: 3%;padding-left: 3%;'>
                    Traditional time series models essentially operate by finding repeating trends within different time periods (like year, month, week, hour), then combine these trends with an overall trend to create time series predictions.  When looking at the above graph, generally speaking Iquitos has it’s larger spikes of cases in the earlier months of the year, however in 2008 there was a large outbreak of Dengue in October and that outbreak was then followed by Iquitos’s more normal increase in cases in January and February of 2009.  This large outlier and change in trend was throwing off the models predictions by adding a huge amount of uncertainty in the trend at the end of the training data.  In order to deal with this, we removed extreme outliers (self defined as being more than three times the interquartile range greater than the 3rd, or upper, quartile).  Removing these outliers reduced the overall accuracy of the training data, but seemed to allow the model to generalize the trend into the future with more certainty.  Similar to San Juan, Iquitos had an unreliable trend for the earlier years in the data set, so the Facebook Prophet model was trained on data from January 2005 to June 2009, then tested for prediction accuracy on the last year of data available.  The Facebook Prophet model had a training MAE of 5.29 cases per week and a testing MAE of 3.45 cases per week and the TensorFlow model had a testing MAE of 2.79 cases per week.  This may seem like the model is predicting the test year better than the training years, however the testing year does not contain outliers and mean measurements are sensitive to outliers so the improved MAE is to be expected. 
                    </p>
            </div>
        </div>

        <br>


        <div id="conclusion" class="row">
            <div class="col-md-12">
                <h2 style="text-align: center">Conclusion</h2>
                <p style='padding-right: 3%;padding-left: 3%;'>As seen in both of the above graphs plotting the time series predictions over the training and testing true values, both of the machine learning models aren’t able to accurately predict large spikes in Dengue Fever.  While neither of these models are perfectly tuned, fine tuning a machine learning model takes quite a bit of hypothesis testing and therefore time, there seems to be an obvious need to bring in more related data in order to identify potential causal factors for the big spikes in the number of infected individuals per week.  Even though correlation coefficient isn’t a direct measurement of a feature variables impact on a target variables outcome, it still gives a good indication of features that can help a machine learning model predict more accurately.  San Juan’s environmental data features have a correlation coefficient range of -0.12 to 0.19 with respect to the number of cases per week, and Iquitos’s range is -0.13 to 0.23.  This shows a relationship between environmental factors and the number of Dengue cases per week exists, but none of the variables have an extremely strong proportional or inverse relationship to explain the large fluctuations in the trend.</p>
            </div>
        </div>
    </div>

    <!-- <br> -->

    <footer class="container-fluid text-center">
        <a href="#myPage" title="To Top">
            <span class="glyphicon glyphicon-chevron-up"></span>
        </a>
        <p class="footer-text">Ramneek Singh Chatha / Scott Clark / Graham Penrose / Bryan Souza <br>
            Data Analytics 2020</p>
    </footer>

    <!-- Highcharts -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/series-label.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <!--  JavaScript Imports     -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.3/d3.min.js"></script>
    <script src="https://d3js.org/d3-fetch.v1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/logic.js"></script>
    <script src="js/tableau.js"></script>
    <script src="https://public.tableau.com/javascripts/api/tableau-2.min.js"></script>
    <script>
        $(document).ready(function () {
            // Add smooth scrolling to all links in navbar + footer link
            $(".navbar a, footer a[href='#myPage']").on('click', function (event) {
                // Make sure this.hash has a value before overriding default behavior
                if (this.hash !== "") {
                    // Prevent default anchor click behavior
                    event.preventDefault();

                    // Store hash
                    var hash = this.hash;

                    // Using jQuery's animate() method to add smooth page scroll
                    // The optional number (900) specifies the number of milliseconds it takes to scroll to the specified area
                    $('html, body').animate({
                        scrollTop: $(hash).offset().top
                    }, 900, function () {

                        // Add hash (#) to URL when done scrolling (default click behavior)
                        window.location.hash = hash;
                    });
                } // End if
            });

            $(window).scroll(function () {
                $(".slideanim").each(function () {
                    var pos = $(this).offset().top;

                    var winTop = $(window).scrollTop();
                    if (pos < winTop + 600) {
                        $(this).addClass("slide");
                    }
                });
            });
        })
    </script>
</body>

</html>